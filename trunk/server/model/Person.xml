<?xml version="1.0"?>
<define>

    <model package="person.bom" >
        <bean name="Person" persistent="true" unique-key="vorname+nachname">
            <field name="vorname"/>
            <field name="nachname"/>
            <field name="telefon"/>
            <field name="email"/>
            <collection name="adressen" create="1">
                <bean name="Adresse">
                    <field name="land"/>
                    <field name="ort"/>
                    <field name="plz"/>
                    <field name="strasse"/>
                </bean>
            </collection>
        </bean>
    </model>

    <view package="person.view" model="Person" >

        <lister name="PersonLister" label="Personen Auflister" model="Person">
            <command use="LoadTableCommand" icon="refresh" label="Uebersicht Personen neu laden"/>
            <command use="OpenEditorCommand" editor="PersonEditor" label="Person bearbeiten" icon="edit"/>
            <command use="DeleteBoCommand" label="Person loeschen" icon="delete"/>

            <column path="vorname" label="Vorname" searchable="true"/>
            <column path="nachname" label="Nachname" searchable="true"/>
            <!--<column path="adressen.Adresse[1]/ort" label="1. Adresse" searchable="true"/>-->
        </lister>

        <editor name="PersonEditor">
            <tree_node label="Person" path="." model="Person" icon="user" open="true" panel="default" >
                <tree_node label="Adressen" path="adressen" icon="table" open="true" model="Adresse" lister="default">
                    <command use="CreateNodeCommand" label="neue Adresse" icon="new"/>
                    <tree_node label="Adresse {ort}" path="adressen" icon="form" open="true" model="Adresse" panel="default">
                        <command use="CreateNodeCommand" label="neue Adresse" icon="new"/>
                        <command use="CopyNodeCommand" label="Adresse kopieren" icon="copy"/>
                        <command use="DeleteNodeCommand" label="Adresse loeschen" icon="delete"/>
                    </tree_node>
                </tree_node>
            </tree_node>

            <command use="SaveBoCommand" label="Person speichern" icon="save"/>
            <command use="LoadBoCommand" label="Person laden" icon="refresh"/>
            <command use="DeleteBoCommand" label="Person loeschen" icon="delete"/>
        </editor>

    </view>

</define>




