<?xml version="1.0"?>
<!DOCTYPE define SYSTEM "model.dtd">
<define>

    <!--<model package="permission">-->
        <!--<bean name="PermissionsData" >-->
            <!--<collection name="contexts" create="1">-->
                <!--<bean name="PermissionContext">-->
                    <!--<field name="permitted" />-->
                    <!--<field name="userName" />-->
                    <!--<field name="context"/>-->
                    <!--<field name="userId" />-->
                    <!--<collection name="switches" >-->
                        <!--<bean name="PermissionSwitch">-->
                            <!--<field name="key" />-->
                            <!--<field name="isOn" type = "Boolean"/>-->
                        <!--</bean>-->
                    <!--</collection>-->
                <!--</bean>-->
            <!--</collection>-->
        <!--</bean>-->
    <!--</model>-->

    <view package="permission.view" >
        <tree_editor name="PermissionEditor" type="PermissionsData" label="Berechtigung fuer {userName}" >
            <tree_node label="Berechtigungen" path="." type="PermissionsData" icon="wrench" open="true"  panel="default">
                 <tree_node label="Kontext" path="contexts" type="PermissionContext" icon="user" open="true" panel="ContextPanel" />
            </tree_node>

            <command name="SavePermissionCommand" label="Berechtigung speichern" icon="save"/>
            <command name="LoadPermissionsCommand" label="Berechtigungen laden" icon="refresh"/>
        </tree_editor>

        <panel name="ContextPanel" editable="true" label="Berechtigungs Kontext">
            <input label="permitted" path="permitted" type="boolean"/>
            <input label="userName" path="userName"/>
            <input label="context" path="context"/>

            <input label="Switches" path="switches" type="list">
                <lister name="SwitchesLister" type="default">
                </lister>
            </input>
        </panel>

    </view>

</define>

