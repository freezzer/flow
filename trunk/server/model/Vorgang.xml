<?xml version="1.0"?>
<define>

    <model java_dir="server/src/generated/bom" java_package="generated.bom"
           flex_dir="flex/src/generated/bom" flex_package="generated.bom">
        <bean name="Vorgang" persistent="true" unique-key="id" editor="VorgangEditor">
            <field name="nummer"/>
            <field name="id"/>
            <field name="typ"/>
            <collection name="transitions" create="1">
                <bean name="Transition">
                    <field name="name"/>
                    <field name="dir"/>
                    <bean name="Workmodel" create="1">
                        <bean name="Kopf">
                            <field name="mrn"/>
                            <field name="zollstelle"/>
                            <field name="erstellt" type="date"/>
                            <field name="angemeldet" type="Date"/>
                        </bean>
                        <bean name="Geschaeft">
                            <field name="art"/>
                            <field name="betrag"/>
                            <field name="waehrung"/>
                        </bean>
                        <field name="zollstelle_ausfuhr"/>
                        <field name="zollstelle_eam"/>
                        <field name="zollstelle_ausgang"/>
                        <collection name="positionen" create="1" type="Position">
                            <bean name="Position">
                                <field name="nummer"/>
                                <field name="warennummer"/>
                                <field name="roh_gewicht"   type="Number"/>
                                <field name="netto_gewicht" type="number"/>
                                <collection name="verschluesse" create="1" type="Verschluss">
                                    <bean name="Verschluss">
                                        <field name="nummer"/>
                                        <field name="zeichen"/>
                                    </bean>
                                </collection>
                                <collection name="packstuecke" create="1">
                                    <bean name="Packstueck">
                                        <field name="nummer"/>
                                        <field name="art"/>
                                        <field name="anzahl"/>
                                    </bean>
                                </collection>
                                <collection name="unterlagen" create="1">
                                    <bean name="Unterlage">
                                        <field name="nummer"/>
                                        <field name="art"/>
                                        <field name="bezeichnung"/>
                                        <field name="begin"/>
                                        <field name="ende"/>
                                    </bean>
                                </collection>
                            </bean>
                        </collection>
                    </bean>
                </bean>
            </collection>
        </bean>
    </model>

    <view flex_dir="flex/src/generated/view" flex_package="generated.view" model="Vorgang">

        <editor name="VorgangEditor">
            <tree_node label="Vorgang" icon="lorry" type="Vorgang" path="/">
                <tree_node label="Transition" path="transitions" icon="arrow.right" type="Transition">
                    <tree_node label="Kopf" path="workmodel" panel="KopfPanel" />
                    <tree_node label="Positionen" path="workmodel.positionen" create="true" listView="true" type="Position">
                        <tree_node label="Position" path="workmodel.positionen" panel="PositionPanel" delete="true" copy="true" create="true" type="Position">
                            <tree_node label="Verschluesse" path="verschluesse" create="true" listView="true" type="Verschluss">
                                <tree_node label="Verschluss" path="verschluesse" panel="VerschlussPanel" icon="lock" delete="true" copy="true" create="true" type="Verschluss"/>
                            </tree_node>
                            <tree_node label="Packstuecke" path="packstuecke" listView="true" create="true" type="Packstueck">
                                <tree_node label="Packstueck" path="packstuecke" panel="PackStueckPanel" icon="pack" delete="true" copy="true" create="true" type="Packstueck"/>
                            </tree_node>
                            <tree_node label="Unterlagen" path="unterlagen" listView="true"  create="true"  type="Unterlage">
                                <tree_node label="Unterlage" path="unterlagen" panel="UnterlagePanel" icon="dock" delete="true" copy="true" create="true" type="Unterlage"/>
                            </tree_node>
                        </tree_node>
                    </tree_node>
                </tree_node>
            </tree_node>
        </editor>

        <panel name="KopfPanel" >
           <input label="MRN"           path="kopf.mrn" type="string" />
           <input label="Zollstelle"    path="kopf.zollstelle" type="lookup" />
           <input label="erstellt am"   path="kopf.erstellt" type="date" />
           <input label="angemeldet am" path="kopf.angemeldet" type="date" />
           <input label="container"     path="kopf.container" type="Boolean" />

           <input label="Geschaeftsart"     path="geschaeft.art"  />
           <input label="Waehrung"     path="geschaeft.waehrung"  />
           <input label="Betrag"      path="geschaeft.betrag"  />
        </panel>


    </view>

</define>




